<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.62">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><title>合成事件 | web前端面试</title><meta name="description" content="React的合成事件">
    <link rel="preload" href="/interview/assets/style-a44f9669.css" as="style"><link rel="stylesheet" href="/interview/assets/style-a44f9669.css">
    <link rel="modulepreload" href="/interview/assets/app-42511d1c.js"><link rel="modulepreload" href="/interview/assets/events.html-feb1a461.js"><link rel="modulepreload" href="/interview/assets/events.html-9c711ae6.js"><link rel="prefetch" href="/interview/assets/index.html-e42fbec5.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-1dcc31e6.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-d82004b3.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-020ef126.js" as="script"><link rel="prefetch" href="/interview/assets/algorithm.html-ac191834.js" as="script"><link rel="prefetch" href="/interview/assets/closure.html-bc155966.js" as="script"><link rel="prefetch" href="/interview/assets/debounce.html-2ef75015.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-b81bbd37.js" as="script"><link rel="prefetch" href="/interview/assets/fiber.html-69c8e091.js" as="script"><link rel="prefetch" href="/interview/assets/hook.html-f8e022cd.js" as="script"><link rel="prefetch" href="/interview/assets/optimize.html-222aaa42.js" as="script"><link rel="prefetch" href="/interview/assets/reactVsVue.html-07712258.js" as="script"><link rel="prefetch" href="/interview/assets/redux.html-b2e71254.js" as="script"><link rel="prefetch" href="/interview/assets/setState.html-5d65e872.js" as="script"><link rel="prefetch" href="/interview/assets/useState.html-8a4a7c20.js" as="script"><link rel="prefetch" href="/interview/assets/vNode.html-9c6af47e.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-37df77f0.js" as="script"><link rel="prefetch" href="/interview/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-dfac23c6.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-5ab7209f.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-81403e80.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-a4358518.js" as="script"><link rel="prefetch" href="/interview/assets/algorithm.html-8659e609.js" as="script"><link rel="prefetch" href="/interview/assets/closure.html-8b6d403b.js" as="script"><link rel="prefetch" href="/interview/assets/debounce.html-a05ad7c5.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-8c566617.js" as="script"><link rel="prefetch" href="/interview/assets/fiber.html-8a998c77.js" as="script"><link rel="prefetch" href="/interview/assets/hook.html-8eda15cb.js" as="script"><link rel="prefetch" href="/interview/assets/optimize.html-3f272366.js" as="script"><link rel="prefetch" href="/interview/assets/reactVsVue.html-e91e9b6a.js" as="script"><link rel="prefetch" href="/interview/assets/redux.html-f22caab4.js" as="script"><link rel="prefetch" href="/interview/assets/setState.html-cdd6bba4.js" as="script"><link rel="prefetch" href="/interview/assets/useState.html-b6440ccd.js" as="script"><link rel="prefetch" href="/interview/assets/vNode.html-35145b3b.js" as="script"><link rel="prefetch" href="/interview/assets/index.html-aaa90a97.js" as="script"><link rel="prefetch" href="/interview/assets/404.html-2b9eb000.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/interview/" class=""><img class="logo" src="/interview/images/logo.png" alt="web前端面试"><span class="site-name can-hide">web前端面试</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/interview/README.md" class="sidebar-item sidebar-heading" aria-label="概总"><!--[--><!--]--> 概总 <!--[--><!--]--></a><!----></li><li><a href="/interview/css/README.md" class="sidebar-item sidebar-heading" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Javascript <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/interview/javascript/" class="sidebar-item" aria-label="事件循环机制"><!--[--><!--]--> 事件循环机制 <!--[--><!--]--></a><!----></li><li><a href="/interview/javascript/debounce.html" class="sidebar-item" aria-label="防抖与节流"><!--[--><!--]--> 防抖与节流 <!--[--><!--]--></a><!----></li><li><a href="/interview/javascript/closure.html" class="sidebar-item" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a><!----></li><li><a href="/interview/javascript/algorithm.html" class="sidebar-item" aria-label="编程"><!--[--><!--]--> 编程 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">React、Vue <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/interview/react/" class="router-link-active sidebar-item" aria-label="React18"><!--[--><!--]--> React18 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/react/events.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="合成事件"><!--[--><!--]--> 合成事件 <!--[--><!--]--></a><!----></li><li><a href="/interview/react/fiber.html" class="sidebar-item" aria-label="fiber架构"><!--[--><!--]--> fiber架构 <!--[--><!--]--></a><!----></li><li><a href="/interview/react/hook.html" class="sidebar-item" aria-label="React Hook"><!--[--><!--]--> React Hook <!--[--><!--]--></a><!----></li><li><a href="/interview/react/optimize.html" class="sidebar-item" aria-label="React 优化"><!--[--><!--]--> React 优化 <!--[--><!--]--></a><!----></li><li><a href="/interview/react/reactVsVue.html" class="sidebar-item" aria-label="React 和 Vue 的区别"><!--[--><!--]--> React 和 Vue 的区别 <!--[--><!--]--></a><!----></li><li><a href="/interview/react/redux.html" class="sidebar-item" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><!----></li><li><a href="/interview/react/setState.html" class="sidebar-item" aria-label="setState"><!--[--><!--]--> setState <!--[--><!--]--></a><!----></li><li><a href="/interview/react/useState.html" class="sidebar-item" aria-label="useSate"><!--[--><!--]--> useSate <!--[--><!--]--></a><!----></li><li><a href="/interview/react/vNode.html" class="sidebar-item" aria-label="VNode 是什么？什么是虚拟 DOM？"><!--[--><!--]--> VNode 是什么？什么是虚拟 DOM？ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/interview/http/README.md" class="sidebar-item sidebar-heading" aria-label="Http"><!--[--><!--]--> Http <!--[--><!--]--></a><!----></li><li><a href="/interview/webpack/README.md" class="sidebar-item sidebar-heading" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>React 合成事件是指将原生事件合成一个 React 事件，之所以要封装自己的一套事件机制，目的是为了实现全浏览器的一致性，抹平不同浏览器之间的差异性。</p><p><img src="/interview/assets/eventflow-4942dfab.svg" alt="alt 图片"></p><p>所谓事件流包括三个阶段：事件捕获、目标阶段和事件冒泡。事件捕获是从外到里，对应图中的红色箭头标注部分 window -&gt; document -&gt; html ... -&gt; target，目标阶段是事件真正发生并处理的阶段，事件冒泡是从里到外，对应图中的 target -&gt; ... -&gt; html -&gt; document -&gt; window。 React 合成事件的工作原理大致可以分为两个阶段：</p><ol><li>事件绑定</li><li>事件触发</li></ol><p>在 React17 之前，React 是把事件委托在 document 上的，React17 及以后版本不再把事件委托在 document 上，而是委托在挂载的容器上了<br> 当真实的 dom 触发事件时，此时构造 React 合成事件对象，按照冒泡或者捕获的路径去收集真正的事件处理函数，在此过程中会先处理原生事件，然后当冒泡到 document 对象后，再处理 React 事件。</p><p>React 的合成事件是 React 在事件处理上的一种封装机制，它是为了提供更一致的跨浏览器事件处理方式而设计的。</p><p>合成事件的工作原理如下：</p><ol><li><p>事件注册：在 React 组件中，你可以通过 JSX 的语法为元素添加事件处理函数，例如 <code>&lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;</code>。</p></li><li><p>事件委托：当元素上触发了事件，React 并不直接将原生事件绑定到元素上，而是在顶层进行事件委托。React 会将所有的事件委托到一个共享的根节点上（通常是 document），以便管理事件的注册和触发。</p></li><li><p>合成事件对象：当事件触发时，React 会根据事件类型创建一个合成事件对象，并将它传递给事件处理函数。合成事件对象是一个跨浏览器的、封装了原生事件的 JavaScript 对象。它提供了一致的接口，使得在不同浏览器和环境下处理事件变得更加统一。</p></li><li><p>事件处理函数执行：在事件处理函数中，你可以访问合成事件对象，并在其中获取事件的相关信息，如事件类型、目标元素、键盘状态、鼠标位置等。</p></li><li><p>事件池与事件回收：为了提高性能，React 使用了事件池（Event Pool）的概念，即复用合成事件对象。在事件处理函数执行完毕后，合成事件对象会被重置，并返回到事件池中供下一次事件使用，而不是立即销毁。</p></li></ol><p>通过使用合成事件，React 提供了一种更高级、更一致的事件处理机制，使得开发人员可以更方便地编写事件处理逻辑，而无需考虑不同浏览器之间的差异。此外，合成事件还提供了一些额外的特性，例如阻止默认行为、停止事件传播等，可以通过合成事件对象的方法来实现。</p><p>需要注意的是，由于合成事件是 React 的封装，它并不是原生的 DOM 事件，因此有些特性可能与原生事件有所不同。但在大多数情况下，使用合成事件可以满足常见的事件处理需求，并提供更好的跨浏览器兼容性。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/interview/react/" class="router-link-active" aria-label="React18"><!--[--><!--]--> React18 <!--[--><!--]--></a></span><span class="next"><a href="/interview/react/fiber.html" class="" aria-label="fiber架构"><!--[--><!--]--> fiber架构 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/interview/assets/app-42511d1c.js" defer></script>
  </body>
</html>
